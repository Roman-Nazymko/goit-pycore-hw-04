import sys
from pathlib import Path
from colorama import init, Fore

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è colorama –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Å–∫–∏–¥–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–∏–≤–æ–¥—É
init(autoreset=True)

def display_directory_structure(directory_path, indent=0):
    # –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–ª—è—Ö—É –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —É –æ–±'—î–∫—Ç —Ç–∏–ø—É Path
    directory = Path(directory_path)

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —ñ—Å–Ω—É—î –≤–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö —Ç–∞ —á–∏ —î –≤—ñ–Ω –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
    if not directory.is_dir():
        # –í–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, —è–∫—â–æ —à–ª—è—Ö –Ω–µ —ñ—Å–Ω—É—î –∞–±–æ –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
        print(Fore.RED + f"–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –Ω–µ —ñ—Å–Ω—É—î –∞–±–æ –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é: {directory_path}")
        return
    
    # –Ü—Ç–µ—Ä–∞—Ü—ñ—è –ø–æ –µ–ª–µ–º–µ–Ω—Ç–∞–º (—Ñ–∞–π–ª–∞–º —Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è–º) —É –≤–∫–∞–∑–∞–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
    for item in directory.iterdir():
        if item.is_dir():  # –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
            # –í–∏–≤–µ–¥–µ–Ω–Ω—è –Ω–∞–∑–≤–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ —ñ–∫–æ–Ω–∫–æ—é
            print(" " * (indent + 2) + Fore.BLUE + f"üìÇ {item.name}/")
            # –†–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó display_directory_structure –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–º—ñ—Å—Ç—É –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
            display_directory_structure(item, indent + 4)
        elif item.is_file():  # –Ø–∫—â–æ –µ–ª–µ–º–µ–Ω—Ç —î —Ñ–∞–π–ª–æ–º
            # –í–∏–≤–µ–¥–µ–Ω–Ω—è –Ω–∞–∑–≤–∏ —Ñ–∞–π–ª—É –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ —ñ–∫–æ–Ω–∫–æ—é
            print(" " * (indent + 2) + Fore.GREEN + f"üìÑ {item.name}")

if __name__ == "__main__":
    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    if len(sys.argv) != 2:
        # –í–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, —è–∫—â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∞
        print(Fore.RED + "–ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç - —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.")
        sys.exit(1)
    
    # –û—Ç—Ä–∏–º–∞–Ω–Ω—è —à–ª—è—Ö—É –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    directory_path = sys.argv[1]
    
    # –í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó display_directory_structure –∑ –≤–∫–∞–∑–∞–Ω–∏–º —à–ª—è—Ö–æ–º –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
    display_directory_structure(directory_path)
